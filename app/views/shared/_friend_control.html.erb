<span class="add-<%= user.id %>">
    <% if user != current_user %>
        <% if current_user.friendship?(user) %>
    <%= link_to "Cancel Friendship", destroy_friendship_path(current_user.get_friendship_id(user)), remote: true, method: :delete, class: "btn btn-danger" %>
    <% elsif current_user.invitation?(user) %>
    <% if current_user.has_invited?(user) %>
    <%= link_to "Cancel Invitation", friendship_path(current_user.get_friendship_id(user)), remote: true, method: :delete, class: "btn btn-danger" %>
    <% else %>
    <%= link_to "Accept Invitation", friendship_path(current_user.get_friendship_id(user)), remote: true, method: :patch, class: "btn btn-success" %>
    <% end %>
    <% else %>
    <%= link_to "Request Friendship", friendships_path(friendship:  {invited_friend_id: user.id } ), remote: true, method: :post, class: "btn btn-primary" %>
    <% end %> 
    <% end %>
</span>